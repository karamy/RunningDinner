(window.webpackJsonp=window.webpackJsonp||[]).push([[105],{"+q2n":function(n,e,l){"use strict";l.r(e);var t=l("CcnG"),o=function(){return function(){}}(),r=l("pMnS"),i=l("MKJQ"),u=l("jy/b"),a=l("Ip0R"),c=l("mrSG"),d=l("rrMi"),s=l("yzu5"),f=l("98RE"),m=function(){function n(n,e,l,t,o,r){this.route=n,this.alertController=e,this.dinnersService=l,this.paramsService=t,this.notificationsService=o,this.navController=r}return n.prototype.ngOnInit=function(){var n=this;this.route.queryParams.subscribe((function(e){n.dinner=e}))},n.prototype.isMyDinner=function(){return this.paramsService.getParams().dinnerId==+this.dinner.id},n.prototype.onLeaveDinner=function(){return c.__awaiter(this,void 0,void 0,(function(){var n=this;return c.__generator(this,(function(e){switch(e.label){case 0:return[4,this.alertController.create({header:"Abbandono",message:"Confermi di voler abbandonare la cena? Lo farà anche il tuo partner",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(){console.log("confirm cancel")}},{text:"Purtroppo si",handler:function(){n.sendRequestLeaveDinner()}}]})];case 1:return[4,e.sent().present()];case 2:return e.sent(),[2]}}))}))},n.prototype.sendRequestLeaveDinner=function(){var n=this,e={dinnerId:this.dinner.id,groupId:this.paramsService.getParams().groupId};this.dinnersService.leaveDinner(e).then((function(){n.paramsService.loadParams().then((function(){n.notificationsService.fireUpdateParamsEvent()})),n.navController.navigateRoot("/home")}),(function(n){console.warn(n)}))},n.prototype.onJoinDinner=function(){return c.__awaiter(this,void 0,void 0,(function(){var n=this;return c.__generator(this,(function(e){switch(e.label){case 0:return[4,this.alertController.create({header:"Iscriviti",message:"Confermi di voler partecipare la cena? Lo farà anche il tuo partner",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(){console.log("confirm cancel")}},{text:"Eccerto!",handler:function(){n.sendRequestJoinDinner()}}]})];case 1:return[4,e.sent().present()];case 2:return e.sent(),[2]}}))}))},n.prototype.sendRequestJoinDinner=function(){var n=this,e={dinnerId:this.dinner.id,groupId:this.paramsService.getParams().groupId};this.dinnersService.joinDinner(e).then((function(){n.paramsService.loadParams().then((function(){n.notificationsService.fireUpdateParamsEvent()})),n.navController.navigateRoot("/home")}),(function(n){console.warn(n)}))},n}(),p=l("ZYCi"),h=t["ɵcrt"]({encapsulation:0,styles:[[""]],data:{}});function v(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,3,"ion-button",[],null,[[null,"click"]],(function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.onLeaveDinner()&&t),t}),i.P,i.d)),t["ɵdid"](1,49152,null,0,u.j,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵeld"](2,0,null,0,1,"ion-icon",[["name","person-remove"],["slot","icon-only"]],null,null,null,i.bb,i.p)),t["ɵdid"](3,49152,null,0,u.B,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{name:[0,"name"]},null)],(function(n,e){n(e,3,0,"person-remove")}),null)}function g(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,2,"ion-button",[["color","success"]],null,[[null,"click"]],(function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.onJoinDinner()&&t),t}),i.P,i.d)),t["ɵdid"](1,49152,null,0,u.j,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{color:[0,"color"]},null),(n()(),t["ɵted"](-1,0,["Partecipa "]))],(function(n,e){n(e,1,0,"success")}),null)}function b(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,15,"ion-header",[],null,null,null,i.ab,i.o)),t["ɵdid"](1,49152,null,0,u.A,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵeld"](2,0,null,0,13,"ion-toolbar",[],null,null,null,i.xb,i.L)),t["ɵdid"](3,49152,null,0,u.yb,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵeld"](4,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,i.Q,i.e)),t["ɵdid"](5,49152,null,0,u.k,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵeld"](6,0,null,0,2,"ion-back-button",[["defaultHref","/home/tabs/dinners"]],null,[[null,"click"]],(function(n,e,l){var o=!0;return"click"===e&&(o=!1!==t["ɵnov"](n,8).onClick(l)&&o),o}),i.O,i.c)),t["ɵdid"](7,49152,null,0,u.f,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{defaultHref:[0,"defaultHref"]},null),t["ɵdid"](8,16384,null,0,u.g,[[2,u.eb],u.Eb],{defaultHref:[0,"defaultHref"]},null),(n()(),t["ɵeld"](9,0,null,0,2,"ion-title",[],null,null,null,i.wb,i.K)),t["ɵdid"](10,49152,null,0,u.wb,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵted"](11,0,["",""])),(n()(),t["ɵeld"](12,0,null,0,3,"ion-buttons",[["slot","primary"]],null,null,null,i.Q,i.e)),t["ɵdid"](13,49152,null,0,u.k,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵand"](16777216,null,0,1,null,v)),t["ɵdid"](15,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["ɵeld"](16,0,null,null,6,"ion-content",[],null,null,null,i.W,i.k)),t["ɵdid"](17,49152,null,0,u.t,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵeld"](18,0,null,0,2,"ion-card",[],null,null,null,i.U,i.f)),t["ɵdid"](19,49152,null,0,u.l,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵted"](20,0,[" cena: "," "])),(n()(),t["ɵand"](16777216,null,0,1,null,g)),t["ɵdid"](22,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(n,e){var l=e.component;n(e,7,0,"/home/tabs/dinners"),n(e,8,0,"/home/tabs/dinners"),n(e,15,0,l.isMyDinner()),n(e,22,0,!l.paramsService.getParams().dinnerId)}),(function(n,e){var l=e.component;n(e,11,0,l.dinner.title),n(e,20,0,l.dinner.id)}))}function R(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,1,"app-dinner-detail",[],null,null,null,b,h)),t["ɵdid"](1,114688,null,0,m,[p.a,u.a,d.a,s.a,f.a,u.Eb],null,null)],(function(n,e){n(e,1,0)}),null)}var C=t["ɵccf"]("app-dinner-detail",m,R,{},{},[]),D=l("gIcY"),y=function(){return function(){}}();l.d(e,"DinnerDetailPageModuleNgFactory",(function(){return I}));var I=t["ɵcmf"](o,[],(function(n){return t["ɵmod"]([t["ɵmpd"](512,t.ComponentFactoryResolver,t["ɵCodegenComponentFactoryResolver"],[[8,[r.a,C]],[3,t.ComponentFactoryResolver],t.NgModuleRef]),t["ɵmpd"](4608,a.NgLocalization,a.NgLocaleLocalization,[t.LOCALE_ID,[2,a["ɵangular_packages_common_common_a"]]]),t["ɵmpd"](4608,D.l,D.l,[]),t["ɵmpd"](4608,u.b,u.b,[t.NgZone,t.ApplicationRef]),t["ɵmpd"](4608,u.Db,u.Db,[u.b,t.ComponentFactoryResolver,t.Injector]),t["ɵmpd"](4608,u.Gb,u.Gb,[u.b,t.ComponentFactoryResolver,t.Injector]),t["ɵmpd"](1073742336,a.CommonModule,a.CommonModule,[]),t["ɵmpd"](1073742336,D.k,D.k,[]),t["ɵmpd"](1073742336,D.b,D.b,[]),t["ɵmpd"](1073742336,u.Ab,u.Ab,[]),t["ɵmpd"](1073742336,p.o,p.o,[[2,p.t],[2,p.m]]),t["ɵmpd"](1073742336,y,y,[]),t["ɵmpd"](1073742336,o,o,[]),t["ɵmpd"](1024,p.k,(function(){return[[{path:"",component:m}]]}),[])])}))}}]);